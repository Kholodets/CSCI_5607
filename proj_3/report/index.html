<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <h2>CSCI 5607 Project 3B</h2>
    <h3>Lexi MacLean</h3>
    <p>Scroll down past the 3B section to find the 3A section, which has not been modified since last week except for putting in the correct targz.</p>
    <p>My ray tracer implements <strong>all the basic features</strong> listed for project 3B, as well as <strong>parallelization</strong> and <strong>spot lights</strong>.</p>
    <p>Here are a few sample renders of various scenes to demonstrate the functionality:</p>
    <p>With parallelization, it's able to render the dragon model in about a minute:</p>
    <img src="images/dragon.png" width="600">
    <p><code>foo.png</code> features a <strong>spotlight</strong> and my image seems to be identical to the reference:</p>
    <img src="images/foo.png" width="600">
    <p><br></p>
    <img src="images/plant.png" width="600">
    <p><br></p>
    <img src="images/ShadowTest.png" width="500">
    <p><br></p>
    <p>my ray tracer supports normal interpolation for smooth surfaces:</p>
    <img src="images/arm.png" width="600">
    <p><br></p>
    <p>My ray tracer now supports refraction, along with all of the other aspects of the lighting model as required for 3A:</p>
    <img src="images/outdoor.png" width="600">
    <h3>Parallelization and Performance</h3>
    <p>To enable parallel processing, I simply added the line</p>
    <pre>#pragma omp parallel for</pre>
    <p>to the main function of the ray tracer in the ray generation loop. This significantly speeds up the processing of these scenes using OpenMP.</p>
    <p>Setting <code>$ export OMP_NUM_THREADS=X</code> prior to each run allows me to check performance.</p>
    <p>To render <code>ShadowTest.txt</code>, 1 thread takes 5295ms, 2 threads take 3372ms, 8 take 1101ms.</p>
    <p>To render <code>dragon.txt</code>, 8 threads take 96 seconds, 16 threads take 68 seconds, and 24 threads take 60 seconds.</p>
    <p>It's interesting that we see pretty linear decrease with small numbers of threads, but quickly get into diminishing returns with large amounts.</p>
    <p>Note this is all on my 24-core CPU.</p>
    <h3>Development Comments</h3>
    <p>This is certainly a bit rushed. There were a lot of cases developing this where I'd have to sit and think on it for a while, and feel dumb when I realized the straightforward fix. Having a little more time to implement everything would be pretty nice.</p>
    <p>The code is quite unorganized as-is, and I'll probably work on cleaning that up for my own sake.</p>
    <p>I wanted to implement a BVH, but I ran out of time and was able to render some of the scenes with lots of tris by brute force, so it turned out OK.</p>
    <p>I'm shooting for full points (basic features + spot light + parallel = 85 + 5 + 10 = 100) on the 1-day late on the basis that I went out for halloween.</p>
    <p>Here's a pic of me and some friends at a house party, I'm doing the double peace signs:</p>
    <img src="images/halloween.jpg" width="500">
    <h3>Download</h3>
    <p>A <code>tar.gz</code> containing the project files FOR PROJECT 3B and a x86-64 linux executable can be found here: <a href="macle119_proj3.tar.gz">macle119_proj3.tar.gz</a></p>
    <p>Additionally, the code may be perused at this sites parent repository: <a href="https://github.com/Kholodets/CSCI_5607/tree/main/proj_3"><a href="https://github.com/Kholodets/CSCI_5607/tree/main/proj_3">https://github.com/Kholodets/CSCI_5607/tree/main/proj_3</a></a></p>
    <h2>CSCI 5607 Project 3A</h2>
    <h3>Lexi MacLean</h3>
    <h3>Scene Setup</h3>
    <p>My ray tracer supports user specified <strong>camera placement, image resolution(aspect ratio), background color, and PNG output images</strong>.</p>
    <p>The following images are rendered using the normal of the hit location as the color, this visualization is useful to see what scene geometry is doing if other shading methods are absent or inadequate.</p>
    <p>Rendered with setup files (and with the early return from shading funciton for the normal):</p>
    <pre>#####################################<br>camera_pos: 0 0 4<br>camera_fwd: 0 0 1<br>camera_up: 0 1 0<br>camera_fov_ha: 15<br>output_image: setup1.png<br>film_resolution: 1000 1000<br>material: 1 1 1 1 1 1 0 0 0 5 0 0 0 1<br>sphere: 0 0 0 1<br>background: 0 0 1<br>#####################################</pre>
    <pre>#####################################<br>camera_pos: 0 4 0<br>camera_fwd: 0 1 0<br>camera_up: 0 0 -1<br>camera_fov_ha: 45<br>output_image: setup2.png<br>film_resolution: 1000 1000<br>material: 1 1 1 1 1 1 0 0 0 5 0 0 0 1<br>sphere: 0 0 0 1<br>ambient_light: .1 .1 .1<br>background: 0 0 1<br>#####################################</pre>
    <img src="images/setup1.png" width="500"><img src="images/setup2.png" width="500">
    <p>The change in the color gradient over the rendered circle shows that the camera is viewing it from a different angle. The change in size of the cirlce between the two images despite being the same distance away shows that the field of view is wider in the latter.</p>
    <h3>Spheres, Lights, Shadows, Reflection</h3>
    <p>My ray tracer supports <strong>basic sampling, ambient light, multiple point light sources, sphere primitives, hard shadows, diffuse and specular color, and reflection.</strong></p>
    <p>Here is an image of a scene featuring three spheres with diffuse and specular qualities, demonstrating shadows with multiple lights, reflections, lambertial diffuse surfaces, and phong specular surfaces:</p>
    <pre>###########################################################<br>camera_pos: 0 1 4<br>camera_fwd: 0 0 1<br>camera_up 0 1 0<br>camera_fov_ha: 45<br>output_image: lighting.png<br>ambient_light .25 .25 .25<br>film_resolution: 1600 900<br>background: .05 .05 .05<br><br>#ground<br>material: .75 .75 .75 .75 .75 .75 .3 .3 .3 32 .2 .2 .2 1.5<br>sphere: 0 -100 0 100<br><br>#red sphere:<br>material: 1 0 0 1 0 0 .3 .3 .3 5 0 0 0 1.5<br>sphere: -2.5 1 0 .75<br><br>#blue sphere:<br>material: 0 0 1 0 0 1 .3 .3 .3 5 0 0 0 1.5<br>sphere: 2.5 1 0 .75<br><br>point_light: 70 70 70 10 7 7<br>point_light: 70 70 70 -10 7 7<br>###########################################################</pre>
    <img src="images/lighting.png" width="1000">
    <h3>Example Scenes</h3>
    <p>Here are my ray tracers renders of the two example scenes provided:</p>
    <img src="images/spheres1.png" width="700"><img src="images/spheres2.png" width="700">
    <p>Notably absent from these renders are refractive properties. This is one of the main features I still need to add, but is omitted in this submission. The first example scene clearly displays <strong>ambient light</strong> on each of the spheres.</p>
    <h3>Project experience and moving forward</h3>
    <p>Working on this ray tracer has been fun. I used a lot of the code from HW3 to get going. Due to being pressed for time, I was between using the provided code here or reimplementing the lighting model in a stochastic path tracer I wrote in rust a few years ago. I decided to go with the C++ homework code so I didn't have to relearn rust and re-write the parser, and to stick with C++ for this class's work.</p>
    <p>I didn't run into too much trouble during the development of it, some features required a bit of messing with PGA expressions to get working, but nothing too bad. The main issue with the raytracer right now is speed. It currently implements no acceleration structure, and takes quite a while to render. It also has no antialiasing, so the jaggies are pretty bad. Adding antialiasing would make it unacceptably slow, so an acceleration structure is high priority.</p>
    <p>By my count, I've implemented 11 of the 5-point features: <code>(cam placement, film res, aspect ratio), background colors, png output, spheres, ambient lights, point light sources, shadows, multiple light sources, basic sampling, color/specularity, and reflection</code>. Since, I'm turning this in a day late, I'm just shooting for full points.</p>
    <h3>Download</h3>
    <p>A <code>tar.gz</code> containing the project files FOR PROJECT 3A and a x86-64 linux executable can be found here: <a href="macle119_proj3a.tar.gz">macle119_proj3a.tar.gz</a></p>
    <p>Additionally, the code may be perused at this sites parent repository: <a href="https://github.com/Kholodets/CSCI_5607/tree/main/proj_3"><a href="https://github.com/Kholodets/CSCI_5607/tree/main/proj_3">https://github.com/Kholodets/CSCI_5607/tree/main/proj_3</a></a></p>
  </body>
</html>
